<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
<link href="https://asks.oss-cn-beijing.aliyuncs.com/static/css/vant.css" rel="stylesheet" type="text/css"/>
<link href="https://asks.oss-cn-beijing.aliyuncs.com/static/css/important.css" rel="stylesheet" type="text/css"/>
<link href="https://unpkg.com/animate.css@3.5.2/animate.min.css" rel="stylesheet" type="text/css">
<link href="/public/css/common.css" rel="stylesheet" type="text/css"/>
<script src="https://asks.oss-cn-beijing.aliyuncs.com/static/js/jquery-2.1.3.min.js"></script>
<script src="https://asks.oss-cn-beijing.aliyuncs.com/static/js/vueJs2.5.16.js"></script>
<script src="https://asks.oss-cn-beijing.aliyuncs.com/static/js/vant.js"></script>
<title></title>
<style>
.colorText {
    /* color: #7790f7 !important; */
    background: url(/public/images/icon_top.png) no-repeat right 15px center !important;
    background-size: 13px auto!important;
}

.wrapper {

    height: 100%;
    overflow: hidden;
    margin: 0 auto;
    background-color: #fff;
}
.wrapper::after{
    content:'';
    display: block;
    visibility: hidden;
    font-size: 0;
    clear:both;
    width: 100%;
    height:54px;
}
.con-top {
    width: 100%;
}

.header-container {
    height: 54px;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    justify-content: space-around;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    background-color: #fff;
    position: relative;
}

.header-container div .talk {
    background: url(/public/images/zxzx@2x.png) no-repeat 16.00125px center;
    background-size: 24px 24px;
}

.header-container div {
    width: 100%;
    height: 100%;
    position: relative;
}

.header-container div a {
    display: inline-block;
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
}

.line_01 {
    width: 1px;
    border-left: 1px solid #ccc;
    height: 54px;
}

.header-container div .phone {
    background: url(/public/images/dhzx@2x.png) no-repeat 16.00125px center;
    background-size: 24px 24px;
}

.header-container div p {
    display: inline-block;
    height: 100%;
    line-height:54px;
    margin-top:0;
    color: #353a54;
    margin-left: 54.375px;
    font-size:1.2em;
}

.header-container::after {
    content: '';
    width: 100%;
    height:11.25px;
    background-color: #f2f2f2;
    position: absolute;
    bottom: -11.25px;
    left: 0;
}

.middle-container h3::after {
    content: '';
    display: block;
    height: 16px;
    width: 3px;
    background-color: #365AF7;
    position: absolute;
    top: 12px;
    left: 16px;
}

.middle-container h3 {
    margin-bottom: 4px;
    height:41px;
    line-height: 41px;
    margin-top: 0;
    padding-left: 27px;
    font-size:16px;
    font-weight: 500;
    color: #333;
    position: relative;
    /* border-bottom: 1px solid #f2f2f2; */
}

.body-container {
    background-color: #fff;
    width: 100%;
    overflow: hidden;
}

.body-container .con-item {
    height: 57px;
    line-height: 57px;
    background-color: #fff;
    padding: 0 16px;
}

.body-container .con-item a {
    display: inline-block;
    height: 41.25px;
    width: 41.25px;
}
.body-container .con-item a img {
    display:block;
    width: 100%;
    height:100%;
}
.body-container .con-item .item-con p {
    margin: 0;
    color: #666666;
    font-size: 15px;
}
.item-con{
  position: relative;
}
.arrow{
  position: absolute;
  right: 16px;
  top: 23px;
  width: 7px;
  height: 11px;
}


header {
    background-color: #FE3A33!important;
    width: 100%;
    height: 47.25px;
    text-align: center;
    font-size: 18px;
    line-height:47.25px;
    position: relative;
    border-bottom: 1px solid #e4edf7;
    color: #fff;
}
header a{
    width: 53.625px;
    height: 100%;
    display: inline-block;
    position: absolute;
    top: 0;
    left: 0;
    /*background-image: url(../images/help_center/back@2x.png);*/
    /*background-repeat: no-repeat;*/
    /*background-position: center center;*/
}
.bar {
    margin-left:15px;
    font-size: 15px;
    font-weight:400;
    color:rgba(51,51,51,1);
    line-height: 20px;
    background: url(/public/images/icon_bottom.png) no-repeat right 15px center;
    background-size: 13px auto;
    /* background-position: 334.875px center; */
    /* background-repeat: no-repeat; */
    padding: 16px 42px 16px 0;
}

.text {
    padding-top: 16px;
    padding-left: 19px;
    padding-right: 19px;
    line-height: 19px;
    font-size: 13px;
    color: #9A9A9A;
    padding-bottom: 16px;
    font-weight:400;
    background: #f6f6f6;
}
.fontsizeCont{
    font-size:1.4em;
}
.slide-container{
    border-bottom: 1px solid #F6F6F6;
}
[v-cloak] {
    display: none;
}
.con-top img{
    display: block;
    width: 100%;
}
.bottom{
  position: fixed;
  bottom:0;
  left: 0;
  width: 100%;
  height: 54px;
  background:rgba(255,255,255,1);
  box-shadow:0px -5px 16px 0px rgba(0,0,0,0.05);
  text-align: center;
}
.bottom p{
  margin: 0;
}
.bottom p:nth-of-type(1){
  margin: 7px auto 2px;
  color: #365AF7;
  font-size: 17px;
  font-weight: 500;
}
.bottom p:nth-of-type(2){
  color: #ADADAD;
  font-weight: 400;
  font-size: 11px;
}
</style>
</head>
<body >
<div id="app" style="height:100%" v-cloak>
    <!-- <div class="wrapper">
        <div class="con-top">
            <img src="/public/images/helpbanner.png" />
        </div>
        <div class="middle-container">
            <h3>问题版块</h3>
        </div>

        <ul class="con-menu body-container">
            <li v-for="(item,index) in answerLists" :key="index" class="con-item left-container">
                <div class="item-con" @click="showPopup(item.id,item.name)">
                   <img class="arrow" src="/public/images/helparrow.png" />
                   <p>{{item.name}}</p>
                </div>
             </li>
         </ul>
    </div> -->

        <div v-for="(item,index) in sortLists" class="" :key="index">
            <div class="clearfix sortListsbox ">
                <div  @click="toggle($event)" class="clearfix bodhe">
                    <div class="clearfix flt sortLists_f bar" :class="{ colorText: item.show}">
                        {{item.title}}
                    </div>
                </div>
                <div id="mydiv" v-html="item.content" class=" text item" :class="{ colorText2: item.show}" v-show="item.show">

                </div>
            </div>
            <div style="margin: 0 15px;" class="slide-container"></div>
        </div>
</div>
</body>
<script>
var app = new Vue({
  el: '#app',
  data: function data() {
    return {
      show: true,
      activeNames: ['1'],
      sortLists: [],
      textExct: "",
      phoneNumber: "",
      answerLists: [],
      type: "",
      title: '<%-helpName%>',
      copyValue: ''
    };
  },
  created: function created() {
    // this.titleChange();
    this.showPopup(); // 获取信息
    this.helperServiceTel(); // 获取电话

  },
  methods: {
    titleChange: function titleChange() {
      var browser = {
        versions: function () {
          var u = navigator.userAgent,
            app = navigator.appVersion;
          return {
            //移动终端浏览器版本信息
            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
            //ios终端
            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1 //android终端或uc浏览器

          };
        }(),
        language: (navigator.browserLanguage || navigator.language).toLowerCase()
      };
      if (browser.versions.android === true) {
        this.type = 'android';
        window.installment_installment.updateTitle(this.title);
      } else {
        this.type = 'ios';
        window.webkit.messageHandlers.installment_installment.postMessage({
          type: 'title',
          title: this.title,
        });
      }
    },
    //打开model 获取列表
    showPopup: function showPopup(number, text) {
      this.show = !this.show;
      this.helperQaDetails(number);
    },
    //关闭model
    closePopup: function closePopup() {
      this.show = !this.show;
      $("#app").find(".bodhe").children().removeClass("colorText");
      $('#app').find('.item').slideUp();
    },
    //点击列表 上下滑动效果
    toggle: function toggle(ev) {
      var $title = $(ev.target);
      $title.parents('#app').find('.item').slideUp();
      $title.parents("#app").find(".bodhe").children().removeClass("colorText");

      if ($title.parents(".bodhe").next("div").css("display") == "block") {} else {
        $title.addClass("colorText");
        $title.parents(".bodhe").next().slideDown();
      }
    },
    //获取回答标题列表 & 展开答案
    helperQaDetails: function helperQaDetails() {
      var $self = this;
      var url = '/helpCenter/qaDetails';
      var params = {
        _csrf: this.csrf(document),
        subjectId: '<%-helpId%>'
      };
      console.log(this)
      $.get(url, params, function (result) {
          if(result.code == 'L00001'){
              if(this.type=='Android'){
                  window.installment_installment.delUser(result.msg)
              }else{
                  window.webkit.messageHandlers.installment_installment.postMessage({type:'delUser',msg:result.msg});
              }
          }else{
              $self.sortLists = result.data;
          }
      });
    },
    csrf:function csrf(doc){
      if (doc !== undefined) {
        var cookieArr = [];
        var csrfToken = '';
        cookieArr = doc.cookie.split(';');
        cookieArr.map(function(value) {
          if (value.indexOf('csrfToken=') !== -1) {
            csrfToken = value.toString();
            var index = csrfToken.indexOf('=');
            csrfToken = csrfToken.substr(index + 1, csrfToken.length);
          }
          return null;
        });
        return csrfToken;
      }
    },
    //获取客服电话号码
    helperServiceTel: function helperServiceTel() {
      var url = '/helpCenter/serviceTel';
      var $self = this;
      $.get(url, function (result) {
          if(result.code == 'L00001'){
              if(this.type=='Android'){
                  window.installment_installment.delUser(result.msg)
              }else{
                  window.webkit.messageHandlers.installment_installment.postMessage({type:'delUser',msg:result.msg});
              }
          }else{
              $self.phoneNumber = result.data;
              $self.isIosOrAndroid(result.data);
          }
      });
    },
    isIosOrAndroid: function isIosOrAndroid(phoneNumber) {
      var browser = {
        versions: function () {
          var u = navigator.userAgent,
            app = navigator.appVersion;
          return {
            //移动终端浏览器版本信息
            ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
            //ios终端
            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1 //android终端或uc浏览器

          };
        }(),
        language: (navigator.browserLanguage || navigator.language).toLowerCase()
      };
      var pnumber = '';
      var flag = '1';
      if(phoneNumber!='' && phoneNumber!=undefined && phoneNumber!=null){
        pnumber = phoneNumber;
        flag = '1'
      }
      if (browser.versions.android === true) {
        this.type = 'android';
        window.installment_installment.oldfindKeFu(flag,pnumber);
        window.installment_installment.updateTitle(this.title);
      } else {
        this.type = 'ios';
        window.webkit.messageHandlers.installment_installment.postMessage({
          type: 'oldfindKeFu',
          flag: flag,
          phoneNumber:pnumber+''
        }); // 0 隐藏 1 显示

        window.webkit.messageHandlers.installment_installment.postMessage({
          type: 'title',
          title: this.title,
        });
      }
    }
  }
});
</script>
</html>
